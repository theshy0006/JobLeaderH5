(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-feedback-feedback"],{"06c5":function(e,t,n){"use strict";n("a630"),n("fb6a"),n("d3b7"),n("25f0"),n("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=i(n("6b75"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(e){if("string"===typeof e)return(0,a.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,a.default)(e,t):void 0}}},"09f0":function(e,t,n){"use strict";function a(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done);a=!0)if(n.push(s.value),t&&n.length===t)break}catch(u){i=!0,o=u}finally{try{a||null==r["return"]||r["return"]()}finally{if(i)throw o}}return n}}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"0d21":function(e,t,n){"use strict";function a(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"212a":function(e,t,n){var a=n("a13f");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("91c3f22e",a,!0,{sourceMap:!1,shadowMode:!1})},2940:function(e,t,n){"use strict";var a=n("4ea4");n("99af"),n("a434"),n("ac1f"),n("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("3835")),o=a(n("ade3")),s=(a(n("e143")),n("2f62"),{onLoad:function(){var e=this.getHashParameters();this.appAccessToken=e["appAccessToken"],this.userToken=e["token"]},computed:{inputNums:function(){return this.reason.length}},data:function(){var e;return e={imgList:[],index:-1,picker:["程序bug","吐槽","其他"],cardNo:"",reason:"",driverName:"",loadModal:!1,modalName:"",urlArray:[],type:0,appAccessToken:"",userToken:""},(0,o.default)(e,"reason",""),(0,o.default)(e,"phone",""),e},methods:{getHashParameters:function(){for(var e=(location.hash||"").split("?")[1].split("&"),t={},n=0;n<e.length;n++){var a=e[n].split("=");2===a.length&&(t[a[0]]=a[1])}return t},PickerChange:function(e){this.index=e.detail.value},showModal:function(e){this.modalName="bottomModal"},hideModal:function(e){this.modalName=null},LoadModal:function(e){uni.showLoading({title:"loading"})},ChooseImage:function(){var e=this;uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){0!=e.imgList.length?e.imgList.length+t.tempFilePaths.length<=3?e.imgList=e.imgList.concat(t.tempFilePaths):uni.showToast({title:"最多只能上传3张图片",icon:"none"}):e.imgList=t.tempFilePaths,e.uploadImage(t.tempFilePaths)}})},ViewImage:function(e){uni.previewImage({urls:this.imgList,current:e.currentTarget.dataset.url})},uploadImage:function(e){var t=this;uni.uploadFile({url:this.GLOBAL.UploadHeaderImage,name:"file",filePath:e[0],formData:{file:"file",appAccessToken:this.appAccessToken},success:function(e){uni.hideLoading(),console.log(e.data);var n=JSON.parse(e.data);0==n.code?t.urlArray.length<3&&t.urlArray.push(n.data):uni.showToast({title:n.message,icon:"none"})},fail:function(e){uni.hideLoading(),console.log(e)},complete:function(e){console.log(e)}})},DelImg:function(e){var t=this;uni.showModal({content:"确定要删除这张照片吗？",cancelText:"取消",confirmText:"确定",success:function(n){n.confirm&&(t.imgList.splice(e.currentTarget.dataset.index,1),t.urlArray.splice(e.currentTarget.dataset.index,1))}})},upload:function(){if(this.index<0)uni.showToast({title:"请选择反馈类型",icon:"none"});else if(0!=this.reason.length){var e=[];e=e.concat(this.urlArray);while(e.length<3)e.push("");for(var t="",n=0;n<e.length;n++)0!=e[n].length&&(t=t+e[n].url+",");this.LoadModal(),uni.request({url:this.GLOBAL.FeedBack_URL,method:"POST",dataType:"jsonp",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{token:this.userToken,appAccessToken:this.appAccessToken,type:this.picker[this.index],phone:this.phone,content:this.reason,imgs:t}}).then((function(e){uni.hideLoading();var t=(0,i.default)(e,2),n=(t[0],t[1]);console.log(n.data);var a=JSON.parse(n.data);0==a.code?uni.showModal({title:null,showCancel:!1,content:"提交成功",confirmText:"知道了",success:function(e){}}):uni.showToast({title:a.msg,icon:"none"})})).catch((function(e){uni.hideLoading(),console.log("request fail",e),uni.showModal({content:e.errMsg,showCancel:!1})}))}else uni.showToast({title:"请输入反馈信息",icon:"none"})}}});t.default=s},3835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=r(n("0d21")),i=r(n("09f0")),o=r(n("06c5")),s=r(n("3d8c"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return(0,a.default)(e)||(0,i.default)(e,t)||(0,o.default)(e,t)||(0,s.default)()}},"3cd9":function(e,t,n){"use strict";n.r(t);var a=n("2940"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"3d8c":function(e,t,n){"use strict";function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"65f8":function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-form",[n("v-uni-view",{staticClass:"cu-form-group margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v("反馈类型")]),n("v-uni-picker",{attrs:{value:e.index,range:e.picker},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.PickerChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker "},[e._v(e._s(e.index>-1?e.picker[e.index]:"请选择"))])],1)],1),n("v-uni-view",{staticClass:"cu-form-group margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v("情况说明")])],1),n("v-uni-view",{staticClass:"cu-form-group flex-direction"},[n("v-uni-textarea",{staticClass:"textarea",attrs:{maxlength:"200",placeholder:"请输入反馈信息"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),n("v-uni-view",{staticClass:"bg-white"},[n("v-uni-view",{staticClass:"hint"},[e._v("已输入"),n("span",[e._v(e._s(e.inputNums))]),e._v("/200")])],1),n("v-uni-view",{staticClass:"cu-bar bg-white margin-top-xs"},[n("v-uni-view",{staticClass:"action"},[e._v("图片上传（最多上传3张图片）")])],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[e._l(e.imgList,(function(t,a){return n("v-uni-view",{key:a,staticClass:"bg-img",attrs:{"data-url":e.imgList[a]},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ViewImage.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:e.imgList[a],mode:"aspectFill"}}),n("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":a},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.DelImg.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),e.imgList.length<3?n("v-uni-view",{staticClass:"solids",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ChooseImage.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):e._e()],2)],1),n("v-uni-view",{staticClass:"cu-form-group margin-top-xs"},[n("v-uni-view",{staticClass:"title"},[e._v("联系方式")])],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-input",{staticStyle:{"text-align":"left"},attrs:{placeholder:"手机/邮箱/QQ (选填)",name:"input"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),n("v-uni-button",{staticClass:"bg-sys",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload.apply(void 0,arguments)}}},[e._v("提交")])],1)],1)},o=[]},"6b75":function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"925e":function(e,t,n){"use strict";var a=n("212a"),i=n.n(a);i.a},a13f:function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,".bg-sys[data-v-0259540a]{background-color:#3aa7ff;color:#fff;margin-top:%?34?%;margin-left:%?30?%;margin-right:%?30?%}.textarea[data-v-0259540a]{background-color:#fff;height:%?200?%}.hint[data-v-0259540a]{background-color:#fff;text-align:right;padding-right:%?30?%}span[data-v-0259540a]{color:#007aff}",""]),e.exports=t},d8fe:function(e,t,n){"use strict";n.r(t);var a=n("65f8"),i=n("3cd9");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("925e");var s,r=n("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"0259540a",null,!1,a["a"],s);t["default"]=u.exports}}]);